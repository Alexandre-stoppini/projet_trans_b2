<?php
function explore($path)
{

    $chemin = shell_exec("tree -fi $path");

    $chemin_array = preg_split('/(\/sauvegarde\/)|(\d*\sdirectories,\s\d*\sfiles)/', $chemin);
    for ($i = 0; $i < count($chemin_array); $i++) {

        // print tous les fichiers
        if (preg_match('/(\.)/', $chemin_array[$i])) {
            $foo = preg_split('/(\/)/',$chemin_array[$i]);
            echo "<div class='file'>
                <svg viewBox='0 0 256 256'>
                    <path d='M200,80V224a8,8,0,0,1-16,0V88H67.31348l34.34375,34.34326a8.00018,8.00018,0,0,1-11.31446,11.31348l-48-48c-.0205-.02051-.03759-.04321-.05761-.064-.16358-.167-.32178-.33935-.47022-.52026-.083-.10059-.15527-.20654-.23193-.31006-.07862-.10571-.16065-.20862-.23438-.31836-.08056-.1206-.15088-.24585-.22461-.36987-.05957-.1001-.12207-.19751-.17724-.30029-.06787-.126-.125-.25538-.18506-.384-.05078-.1084-.10547-.2146-.15137-.32568-.05127-.12463-.09326-.252-.13867-.37842-.04248-.11987-.08887-.238-.126-.36059-.03857-.12769-.06738-.25757-.09912-.38672-.03125-.124-.06592-.24622-.09131-.37244-.02978-.15088-.04785-.30334-.06933-.45544-.01465-.10645-.03516-.21094-.0459-.31861a8.02276,8.02276,0,0,1,0-1.584c.01074-.10767.03125-.21216.0459-.31861.02148-.1521.03955-.30456.06933-.45544.02539-.12622.06006-.24841.09131-.37244.03174-.12915.06055-.259.09912-.38672.03711-.12255.0835-.24072.126-.36059.04541-.12647.0874-.25379.13867-.37842.0459-.11108.10059-.21728.15137-.32568.06006-.12866.11719-.25806.18506-.384.05517-.10278.11767-.20019.17724-.30029.07373-.124.14405-.24927.22461-.36987.07373-.10974.15576-.21265.23438-.31836.07666-.10352.14892-.20947.23193-.31006.14844-.18091.30664-.35327.47022-.52026.02-.02076.03711-.04346.05761-.064l48-48a8.00018,8.00018,0,0,1,11.31446,11.31348L67.31348,72H192A8.00008,8.00008,0,0,1,200,80Z'/>
                </svg>
                <span>Votre fichier à télécharger : " . $foo[count($foo)-1] . "</span>
                <a href='/sauvegarde/". $chemin_array[$i] ."' download>
                    <svg>
                    <path d='M17 12v5H3v-5H1v5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5z'/>
                    <path d='M10 15l5-6h-4V1H9v8H5l5 6z'/>
                    </svg>
                </a>
                </div>";
        } else {
            echo "<div class='dir'>
            <svg viewBox='0 0 48 48' enable-background='new 0 0 48 48'>
                <path fill='#FFA000' d='M40,12H22l-4-4H8c-2.2,0-4,1.8-4,4v8h40v-4C44,13.8,42.2,12,40,12z'/>
                <path fill='#FFCA28' d='M40,12H8c-2.2,0-4,1.8-4,4v20c0,2.2,1.8,4,4,4h32c2.2,0,4-1.8,4-4V16C44,13.8,42.2,12,40,12z'/>
            </svg>
            <span>" . $chemin_array[$i]."</span>
            </div>";
        }
    }
}
